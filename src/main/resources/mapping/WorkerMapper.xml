<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.microdev.mapper.WorkerMapper">
    <sql id="Worker_Column_List">
        id as pid, create_time, deleted, modify_time,
        idcard_back, idcard_front, idcard_number, health_card
    </sql>
    <insert id="save" parameterType="com.microdev.model.Worker">
        insert into worker values(#{pid},#{createTime},#{deleted},#{modifyTime},#{idcardBack},#{idcardFront},
        #{idcardNumber},#{healthCard})
    </insert>
    <select id="queryById" parameterType="java.lang.String" resultType="com.microdev.model.Worker">
        select
        <include refid="Worker_Column_List"/>
        from worker where id = #{workerId}
    </select>
	<select id="queryWorker" resultType="java.util.Map">
        select u.id as pid,u.age as age,u.create_time as createTime,u.modify_time as modifyTime,u.activated as activated,u.avatar
        as avatar,u.birthday as birthday,u.email as email,u.mobile as mobile,u.nickname as nickname,CASE u.`sex` WHEN 'MALE' THEN '男' WHEN
		'FEMALE' THEN '女' ELSE '未知' END AS  sex,u.user_type as userType,u.user_code as userCode,w.idcard_back as
		idcardBack,w.idcard_front as idcardFront,w.idcard_number as idcardNumber,w.health_card as healthCard
        from user u left join worker w on u.worker_id = w.id where w.id = #{id}
    </select>

</mapper>