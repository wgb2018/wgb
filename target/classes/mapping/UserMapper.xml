<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.microdev.mapper.UserMapper" >
    <sql id="User_Query_List" >
        id as pid, create_time, deleted, modify_time, activated, avatar, birthday, email, mobile, nickname, password,
        sex, user_type, username, worker_id, user_code, age
    </sql>
    <select id="query" resultType="com.microdev.model.User" parameterType="com.microdev.param.UserDTO" >
        select * from USER
    </select>
    <select id="findByMobile" resultType="com.microdev.model.User"  >
        select <include refid="User_Query_List"/> from USER WHERE mobile = #{mobile}
    </select>
    <select id="queryByWorkerId" resultType="com.microdev.model.User">
        select <include refid="User_Query_List"/> from user where worker_id = #{id}
    </select>
    <select id="queryByUserId" resultType="com.microdev.model.User">
        select <include refid="User_Query_List"/> from user where id = #{userId}
    </select>
    <update id="update" parameterType="com.microdev.model.User">
        update user set deleted = #{deleted},modify_time = #{modifyTime},activated = #{activated},
        avatar = #{avatar},birthday = #{birthday},email = #{email},mobile = #{mobile},nickname = #{nickname},
        password = #{password},sex = #{sex},user_type = #{userType},username = #{username},worker_id = #{workerId},
        user_code = #{userCode} where id = #{pid}
    </update>

</mapper>